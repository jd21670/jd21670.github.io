<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <title>Cholera Outbreak of 1854</title>
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div class = "header">Cholera Outbreak of 1854</div>
        <div class="grid">
            <div class="g s1">
                <svg id = "map" width="600" height="600">
                    <g></g>
                </svg>
            </div>
            <div class="g s2">
                <svg id = "daybar" width="600" height="300">
                    <g></g>
                </svg>
            </div>
            <div class="g s3"></div>
            <div class="g s4"></div>
        </div>

        <script>
            
            d3.csv("data/deathdays.csv").then(function(death_days) {
				d3.csv("data/deaths_age_sex.csv").then(function(death_details) {
                    var i = 0; //detail index
                    var j = 0; //days index
                    var k = 0; //counter
                    var det_len = death_details.length;
                    var day_len = death_days.length;

                    while (j < day_len) {
                        //death_details[i].new = "test";
                        //console.log(death_details[i].gender);
                        deaths = death_days[j].deaths;

                        for (k = 0; k < deaths; k++) {
                            death_details[i].date = death_days[j].date;
                            death_details[i].daynum = j;
                            //console.log(death_details[i]);
                            i++;
                        }
                        j++;
                    }

                    death_days.deaths = parseInt(death_days.deaths);
                    draw_daybar(death_days);
                });
            });

            function draw_daybar (death_days) {
                console.log(death_days);

                bar_x = 600;
                bar_y = 300;
                //bar_max = d3.max(death_days.deaths);
                console.log(death_days);
                bar_count = death_days.length;
                console.log(bar_count);




            }


        </script>
	</body>
</html>